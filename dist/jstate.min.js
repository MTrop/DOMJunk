/****************************************************************************
 * JState by Matt Tropiano (C) 2022
 * Requires ECMAScript 6
 * Licensed for use under the MIT License
 * @license
 ****************************************************************************/
!function(t){if(!t.Element)return console.error("Missing required type: Element.");if(!t.document.querySelectorAll)return console.error("Missing required function: document.querySelectorAll.");if(!t.document.querySelector)return console.error("Missing required function: document.querySelector.");if(!t.Element.prototype.querySelectorAll)return console.error("Missing required function: Element.querySelectorAll.");if(!t.Element.prototype.querySelector)return console.error("Missing required function: Element.querySelector.");function i(t){return void 0===t}function o(t){return null===t}function a(t){return p(t,"Number")}function s(t){return p(t,"String")}function u(t){return p(t,"Function")}function e(t){return p(t,"Object")}function c(t){return i(t)||o(t)||(e=t,p(e,"Array")&&0===t.length)||a(t)&&isNaN(t)||s(t)&&0===t.trim().length||0===t;var e}function l(t,e){if(!i(t)&&!o(t))if(r=t,p(r,"Boolean")||a(t)||s(t))e(t,null,1);else for(var n in t)if(t.hasOwnProperty(n)&&e(t[n],n,t.length))break;var r}const p=function(t,e){return Object.prototype.toString.call(t)==="[object "+e+"]"};Element.prototype.matches||Element.prototype.matchesSelector||Element.prototype.msMatchesSelector;function n(){this instanceof r&&(null!=this.applierTimeout&&(clearTimeout(this.applierTimeout),this.applierTimeout=null),this.applierTimeout=setTimeout(()=>{l(this.nextStateChanges,(t,e)=>{this.stateApplierFunctionMap[e]&&(this.stateApplierFunctionMap[e](t,this.state[e]),this.state[e]=t)}),this.nextStateChanges={}},0))}const h=(e,n)=>t=>{t.addEventListener(e,n)};class r{constructor(t){if(!e(t))throw new Error("Expected object for state applier.");this.stateApplierFunctionMap={},this.changeVerifierMap={},this.state={},this.nextStateChanges={},this.applierTimeout=null,l(t,(t,e)=>{this.addHandler(e,t)})}addHandler(t,e){return u(e)?this.stateApplierFunctionMap[t]=e:(o(e)||i(e))&&this.removeHandler(t),this}removeHandler(t){return delete this.stateApplierFunctionMap[t],this}setState(t){if(e(t))return l(t,(t,e)=>{this.state[e]=t}),this}applyState(t){if(e(t))return l(t,(t,e)=>{this.state[e]!==t&&(this.nextStateChanges[e]=t)}),n.apply(this),this}touchState(){return l(arguments,t=>{this.stateApplierFunctionMap[t]&&(this.nextStateChanges[t]=this.state[t])}),n.apply(this),this}bindStateEvent(t,e,n){const r=this;e=s(e)?document.querySelectorAll(e):e;return l(e,h(t,function(t){u(n)?r.applyState(n(t,r.state)):r.applyState(n)})),this}}var m=new function(){};m.createAppState=function(t){return new r(t)},m.bindFormState=function(e,t,n){if(!c(e)){const u=t||{},l=n;var t=t=>{var t=t.srcElement,e=t.getAttribute("name");e&&(u[e]=t.value,l)&&l(e)},r=h("change",t),i=h("keyup",t),o=h("change",t=>{var t=t.srcElement,e=t.getAttribute("name");e&&(t.checked?u[e]=t.value:delete u[e],l)&&l(e)}),a=h("change",t=>{var e,t=t.srcElement,n=t.getAttribute("name");n&&(e=!!t.getAttribute("multiple"),u[n]=e?[...t.options].filter(t=>t.selected).map(t=>t.value):t.value,l)&&l(n)});for(let t=0;t<e.length;t++){var s=e[t];"INPUT"===s.tagName?"checkbox"===s.type||"radio"===s.type?o(s):"button"!==s.type&&"submit"!==s.type&&(r(s),i(s)):"TEXTAREA"===s.tagName?(r(s),i(s)):"SELECT"===s.tagName&&a(s)}return u}};let f=t.$JS;m.noConflict=function(){t.$JS=f},t.JState=m,t.$JS=m}(this);
//# sourceMappingURL=jstate.min.js.map