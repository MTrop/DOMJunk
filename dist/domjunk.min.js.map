{"version":3,"sources":["STDIN"],"sourcesContent":["/****************************************************************************\r\n * DOMJunk by Matt Tropiano (C) 2021\r\n * Requires ECMAScript 6\r\n * Licensed for use under the MIT License\r\n * @license\r\n ****************************************************************************/\r\n(function(CTX){\r\n\t\r\n\t/********************************************************************/\r\n\t/** Test Browser Capabilities                                      **/\r\n\t/********************************************************************/\r\n\r\n\tif (!CTX.Element) {\r\n\t\tconsole.error(\"Missing required type: Element.\");\r\n\t\treturn;\r\n\t}\r\n\tif (!CTX.document.querySelectorAll) {\r\n\t\tconsole.error(\"Missing required function: document.querySelectorAll.\");\r\n\t\treturn;\r\n\t}\r\n\tif (!CTX.document.querySelector) {\r\n\t\tconsole.error(\"Missing required function: document.querySelector.\");\r\n\t\treturn;\r\n\t}\r\n\tif (!CTX.document.createElement) {\r\n\t\tconsole.error(\"Missing required function: document.createElement.\");\r\n\t\treturn;\r\n\t}\r\n\tif (!CTX.document.createTextNode) {\r\n\t\tconsole.error(\"Missing required function: document.createTextNode.\");\r\n\t\treturn;\r\n\t}\r\n\tif (!CTX.Element.prototype.querySelectorAll) {\r\n\t\tconsole.error(\"Missing required function: Element.querySelectorAll.\");\r\n\t\treturn;\r\n\t}\r\n\tif (!CTX.Element.prototype.querySelector) {\r\n\t\tconsole.error(\"Missing required function: Element.querySelector.\");\r\n\t\treturn;\r\n\t}\r\n\r\n\r\n\t/********************************************************************/\r\n\t/** Utilities                                                      **/\r\n\t/********************************************************************/\r\n\r\n\tconst ENTITIES = {\r\n\t\t'&': '&amp;',\r\n\t\t'<': '&lt;',\r\n\t\t'>': '&gt;',\r\n\t\t'\"': '&quot;',\r\n\t\t\"'\": '&#39;',\r\n\t\t'/': '&#x2F;',\r\n\t\t'`': '&#x60;',\r\n\t\t'=': '&#x3D;'\r\n\t};\r\n\t\r\n\tconst HTML_SPECIAL = /&|\\<|\\>|\\\"|\\'|\\/|`|=/g;\r\n\r\n\tconst HTML_REGEX = /<\\/?[a-z][\\s\\S]*>/i;\r\n\r\n\tconst HTML_ESCAPE = (input) => input.replace(HTML_SPECIAL, (m) => ENTITIES[m]);\r\n\r\n\tconst isType = function(obj, type) {\r\n\t\treturn Object.prototype.toString.call(obj) === '[object '+type+']';\r\n\t};\r\n\r\n\tconst isUndefined = function(obj) {\r\n\t\treturn (typeof obj) === 'undefined';\r\n\t};\r\n\r\n\tconst isNull = function(obj) {\r\n\t\treturn obj === null;\r\n\t};\r\n\r\n\tconst isBoolean = function(obj) {\r\n\t\treturn isType(obj, 'Boolean');\r\n\t};\r\n\r\n\tconst isNumber = function(obj) {\r\n\t\treturn isType(obj, 'Number');\r\n\t};\r\n\r\n\tconst isString = function(obj) {\r\n\t\treturn isType(obj, 'String');\r\n\t};\r\n\r\n\tconst isArray = function(obj) {\r\n\t\treturn isType(obj, 'Array');\r\n\t};\r\n\r\n\tconst isFunction = function(obj) {\r\n\t\treturn isType(obj, 'Function');\r\n\t};\r\n\r\n\tconst isObject = function(obj) {\r\n\t\treturn isType(obj, 'Object');\r\n\t};\r\n\r\n\tconst isBlank = function(obj) {\r\n\t\treturn (\r\n\t\t\t\tisUndefined(obj)\r\n\t\t\t|| isNull(obj) \r\n\t\t\t|| (isArray(obj) && obj.length === 0) \r\n\t\t\t|| (isNumber(obj) && isNaN(obj)) \r\n\t\t\t|| (isString(obj) && obj.trim().length === 0)\r\n\t\t\t|| obj === 0 \r\n\t\t);\r\n\t};\r\n\t\r\n\tconst each = function(list, func) {\r\n\t\tif (isUndefined(list) || isNull(list)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\telse if (isBoolean(list) || isNumber(list) || isString(list)) {\r\n\t\t\tfunc(list, null, 1);\r\n\t\t}\r\n\t\telse if (isArray(list)) {\r\n\t\t\tfor (let i = 0; i < list.length; i++) {\r\n\t\t\t\tif (func(list[i], i, list.length))\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tfor (let x in list) if (list.hasOwnProperty(x)) {\r\n\t\t\t\tif (func(list[x], x, list.length))\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tconst fold = function(obj, func) {\r\n\t\tfunc(obj);\r\n\t\treturn obj;\r\n\t};\r\n\r\n\tconst queryString = function(map) {\r\n\t\tlet accum = [];\r\n\t\teach(map, (value, key) => {\r\n\t\t\tif (isArray(value)) {\r\n\t\t\t\tfor (let i = 0; i < value.length; i++) {\r\n\t\t\t\t\taccum.push(\r\n\t\t\t\t\t\tencodeURIComponent(key) + '=' + encodeURIComponent(value[i])\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse if (!isUndefined(value) && !isNull(value)) {\r\n\t\t\t\taccum.push(\r\n\t\t\t\t\tencodeURIComponent(key) + '=' + encodeURIComponent(value)\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn accum.join('&');\r\n\t};\r\n\t\r\n\tconst isHTML = function(obj) {\r\n\t\treturn HTML_REGEX.test(obj);\r\n\t}\r\n\r\n\tconst createHTML = function(html) {\r\n\t\tconst outElement = document.createElement('template');\r\n\t\toutElement.innerHTML = html;\r\n\t\treturn outElement.content.childNodes;\r\n\t};\r\n\r\n\tconst createElement = function(name, attribs, children) {\r\n\t\tconst out = document.createElement(name);\r\n\t\tif (attribs) each(attribs, (v, k) => {\r\n\t\t\tconst attrObj = document.createAttribute(k);\r\n\t\t\tattrObj.value = v;\r\n\t\t\tout.setAttributeNode(attrObj);\r\n\t\t});\r\n\r\n\t\tif (children) {\r\n\t\t\tif (isArray(children)) {\r\n\t\t\t\tfor (let i = 0; i < children.length; i++) {\r\n\t\t\t\t\tout.appendChild(children[i]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tout.appendChild(children);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn out;\r\n\t};\r\n\r\n\tconst createText = function(data) {\r\n\t\treturn document.createTextNode(data);\r\n\t};\r\n\r\n\t/********************************************************************/\r\n\t/** Other Getters                                                  **/\r\n\t/********************************************************************/\r\n\r\n\t/**\r\n\t * Fetches an element by its id attribute and wraps it in a SelectionGroup.\r\n\t * In most cases, this is more performant than a CSS query.\r\n\t * @param {string} id the id.\r\n\t * @returns {SelectionGroup} the corresponding element in a SelectionGroup, or empty group if no element.\r\n\t */\r\n\tconst $getById = function(id) {\r\n\t\treturn new SelectionGroup(document.getElementById(id));\r\n\t};\r\n\r\n\t/**\r\n\t * Fetches a group of elements by an associated class name.\r\n\t * In most cases, this is more performant than a CSS query.\r\n\t * @param {string} classname the class name.\r\n\t * @returns {SelectionGroup} the corresponding elements in a SelectionGroup, or empty group if no elements.\r\n\t */\r\n\tconst $getByClassName = function(classname) {\r\n\t\treturn new SelectionGroup(document.getElementsByClassName(classname));\r\n\t};\r\n\r\n\t/**\r\n\t * Fetches a group of elements by an associated tag name (and optional namespace).\r\n\t * In most cases, this is more performant than a CSS query.\r\n\t * @param {string} tagname the tag name.\r\n\t * @param {string} namespace (optional) the tag namespace.\r\n\t * @returns {SelectionGroup} the corresponding elements in a SelectionGroup, or empty group if no elements.\r\n\t */\r\n\tconst $getByTagName = function(tagname, namespace) {\r\n\t\treturn isUndefined(namespace) \r\n\t\t\t? new SelectionGroup(document.getElementsByTagName(tagname)) \r\n\t\t\t: new SelectionGroup(document.getElementsByTagNameNS(namespace, tagname))\r\n\t\t;\r\n\t};\r\n\r\n\r\n\t/********************************************************************/\r\n\t/** Classes                                                        **/\r\n\t/********************************************************************/\r\n\r\n\tclass SelectionGroup extends Array {\r\n\t\tconstructor(elements, forceOne) {\r\n\t\t\tsuper();\r\n\t\t\t// Make empty if no elements.\r\n\t\t\tif (isUndefined(elements) || isNull(elements)) {\r\n\t\t\t\tthis.length = 0;\r\n\t\t\t}\r\n\t\t\t// Wrap in one thing if not an array or list.\r\n\t\t\telse if (!!forceOne || isUndefined(elements.length)) {\r\n\t\t\t\tthis[0] = elements;\r\n\t\t\t\tthis.length = 1;\r\n\t\t\t}\r\n\t\t\t// Else, turn into selection.\r\n\t\t\telse {\r\n\t\t\t\tfor (let i = 0; i < elements.length; i++) {\r\n\t\t\t\t\tthis[i] = elements[i];\r\n\t\t\t\t}\r\n\t\t\t\tthis.length = elements.length;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\r\n\t/********************************************************************/\r\n\t/** Commands                                                       **/\r\n\t/********************************************************************/\r\n\r\n\t/**\r\n\t * Calls a function on each element in the SelectionGroup.\r\n\t * Each element is passed to the function as \"this\" and the first \r\n\t * parameter (for fat-arrow lambdas that preserve \"this\").\r\n\t * @param {function} func the function to call for each element.\r\n\t */\r\n\tconst $each = function(func) {\r\n\t\tfunc.apply(this, [this]);\r\n\t};\r\n\r\n\t/**\r\n\t * Performs a document query on the first DOM element in the SelectionGroup, \r\n\t * and returns a new SelectionGroup of the result.\r\n\t * @param {string} query the CSS/document query.\r\n\t * @param {boolean} one (optional) if true, return the first match.\r\n\t * @returns {SelectionGroup} the new SelectionGroup of matching elements.\r\n\t */\r\n\tconst $search = function(query, one) {\r\n\t\treturn !!one \r\n\t\t\t? new SelectionGroup(this.querySelector(query)) \r\n\t\t\t: new SelectionGroup(this.querySelectorAll(query))\r\n\t\t;\r\n\t};\r\n\r\n\t/**\r\n\t * Gets a child of the first DOM element in the SelectionGroup.\r\n\t * @param {number} index the index of the child element to fetch.\r\n\t * @returns {SelectionGroup} the new SelectionGroup with the single child.\r\n\t */\r\n\tconst $child = function(index) {\r\n\t\treturn new SelectionGroup(this.children[index]);\r\n\t};\r\n\r\n\t/**\r\n\t * Gets all immediate children of the first DOM element in the SelectionGroup.\r\n\t * @returns {SelectionGroup} the new SelectionGroup with the children.\r\n\t */\r\n\tconst $children = function() {\r\n\t\treturn new SelectionGroup(this.children);\r\n\t};\r\n\r\n\t/**\r\n\t * Gets the immediate parent of the first DOM element in the SelectionGroup.\r\n\t * @returns {SelectionGroup} the new SelectionGroup with the parent element.\r\n\t */\r\n\tconst $parent = function() {\r\n\t\treturn new SelectionGroup(this.parentElement);\r\n\t};\r\n\r\n\t/**\r\n\t * Gets the parents of the first DOM element in the SelectionGroup.\r\n\t * @returns {SelectionGroup} the new SelectionGroup with the parent elements.\r\n\t */\r\n\tconst $ancestors = function() {\r\n\t\tlet elem = this;\r\n\t\tconst out = [];\r\n\t\twhile (elem.parentElement !== null) {\r\n\t\t\tout.push(elem.parentElement);\r\n\t\t\telem = elem.parentElement;\r\n\t\t}\r\n\t\treturn new SelectionGroup(out);\r\n\t};\r\n\r\n\t/**\r\n\t * Gets all of the children and the children's children of the first DOM element in the SelectionGroup.\r\n\t * @returns {SelectionGroup} the new SelectionGroup with the descending elements.\r\n\t */\r\n\tconst $descendants = function() {\r\n\t\tconst out = [];\r\n\t\tconst childQueue = [ ...this.children];\r\n\t\twhile (childQueue.length > 0) {\r\n\t\t\tconst child = childQueue.pop();\r\n\t\t\tout.push(child);\r\n\t\t\tfor (let i = 0; i < child.children.length; i++) {\r\n\t\t\t\tchildQueue.push(child.children[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn new SelectionGroup(out);\r\n\t};\r\n\r\n\t/**\r\n\t * Gets all of the siblings of first DOM element in the SelectionGroup (parent's children nminus the source element).\r\n\t * @returns {SelectionGroup} the new SelectionGroup with the sibling elements.\r\n\t */\r\n\tconst $siblings = function() {\r\n\t\tconst out = [];\r\n\t\tconst children = [ ...this.parentElement.children];\r\n\t\tfor (let i = 0; i < children.length; i++) {\r\n\t\t\tconst child = children[i];\r\n\t\t\tif (child !== this)\r\n\t\t\t\tout.push(child);\r\n\t\t}\r\n\t\treturn new SelectionGroup(out);\r\n\t};\r\n\r\n\r\n\t/********************************************************************/\r\n\r\n\t/**\r\n\t * Removes all of the children in each DOM element in the SelectionGroup.\r\n\t */\r\n\tconst $clear = function() {\r\n\t\twhile (this.firstChild) {\r\n\t\t\tthis.removeChild(this.firstChild);\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Appends one or more child elements to all of the children in each DOM element in the SelectionGroup.\r\n\t * If elements is an array, each child in the array is appended.\r\n\t * If elements is a Document, that Document's children are appended.\r\n\t * Otherwise, elements is considered to be one element, and it is appended.\r\n\t * @param {*} elements one or more children to add.\r\n\t */\r\n\tconst $append = function(elements) {\r\n\t\tif (elements instanceof SelectionGroup || isArray(elements)) {\r\n\t\t\tfor (let i = 0; i < elements.length; i++) {\r\n\t\t\t\tthis.appendChild(elements[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if (elements instanceof NodeList) {\r\n\t\t\tfor (let i = 0; i < elements.length; i++) {\r\n\t\t\t\tthis.appendChild(elements[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if (elements instanceof Document || elements instanceof DocumentFragment) {\r\n\t\t\tfor (let i = 0; i < elements.children.length; i++) {\r\n\t\t\t\tthis.appendChild(elements.children[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.appendChild(elements);\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Removes all of the children in each DOM element in the SelectionGroup, and\r\n\t * fills them with a new list of children.\r\n\t * Equivalent to: .clear().append(elements)\r\n\t * @param {*} elements one or more children to add.\r\n\t */\r\n\tconst $refill = function(elements) {\r\n\t\t(new SelectionGroup(this)).clear().append(elements);\r\n\t};\r\n\r\n\t/**\r\n\t * Removes all of the children in each DOM element in the SelectionGroup, and\r\n\t * fills them with a new list of children.\r\n\t * Equivalent to: .clear().append(DOMJunk.createTemplateElements(template, model))\r\n\t * @param {Template | SelectionGroup} template the template element to use (can be a SelectionGroup - the first element is used if so).\r\n\t * @param {Object} model the model for the template.\r\n\t */\r\n\tconst $refillTemplate = function(template, model) {\r\n\t\tif (template instanceof SelectionGroup)\r\n\t\t\ttemplate = template[0];\r\n\t\t(new SelectionGroup(this)).clear().append(DOMJunk.createTemplateElements(\r\n\t\t\ttemplate, model\r\n\t\t));\r\n\t};\r\n\r\n\t/**\r\n\t * Removes all of the children in each DOM element in the SelectionGroup, and\r\n\t * then, using the provided array of data, fills them with children generated\r\n\t * from the provided array.\r\n\t * If a non-truthy value is returned for an array element, it is not added.\r\n\t * @param {Array} arr the array of objects. Can be an object - they are both iterated on.\r\n\t * @param {Function} generatorFunc the element generator function. \r\n\t * \t\tFirst parameter is the array element to use, second is the array/map key.\r\n\t */\r\n\tconst $refillList = function(arr, generatorFunc) {\r\n\t\tconst elements = [];\r\n\t\teach(arr, (v, k) => {\r\n\t\t\tconst gen = generatorFunc(v, k);\r\n\t\t\tif (gen) {\r\n\t\t\t\telements.push(gen);\r\n\t\t\t}\r\n\t\t});\r\n\t\t(new SelectionGroup(this)).clear().append(elements);\r\n\t};\r\n\r\n\t/**\r\n\t * Gets/Sets the inner HTML.\r\n\t * If HTML is provided, the inner HTML is set.\r\n\t * If it is undefined, this will return the inner HTML of the first DOM element in the SelectionGroup.\r\n\t * @param {string} data HTML data to set.\r\n\t */\r\n\tconst $html = function(data) {\r\n\t\tif (isUndefined(data)) {\r\n\t\t\treturn this.innerHTML;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.innerHTML = data;\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Gets/Sets the inner text.\r\n\t * If text is provided, the inner HTML is set to the text. Special characters will be converted to entities.\r\n\t * If it is undefined, this will return the inner text of the first DOM element in the SelectionGroup.\r\n\t * @param {string} data HTML data to set.\r\n\t */\r\n\tconst $text = function(text) {\r\n\t\tif (isUndefined(text)) {\r\n\t\t\treturn this.innerText;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.innerHTML = HTML_ESCAPE(text);\r\n\t\t}\r\n\t};\r\n\r\n\t/********************************************************************/\r\n\r\n\t/**\r\n\t * Sets a member on each element of the SelectionGroup to a value.\r\n\t * @param {string} memberName the member name.\r\n\t * @param {*} value the value.\r\n\t */\r\n\tconst $set = function(memberName, value) {\r\n\t\tthis[memberName] = value;\r\n\t};\r\n\t\r\n\t/**\r\n\t * Merges several members into each object's members in the SelectionGroup.\r\n\t * @param {object} memberMap the mapping of member names to values.\r\n\t */\r\n\tconst $merge = function(memberMap) {\r\n\t\teach(memberMap, (v, k) => {\r\n\t\t\tthis[k] = v;\r\n\t\t});\r\n\t};\r\n\r\n\t/********************************************************************/\r\n\r\n\t/**\r\n\t * Merges a set of CSS attributes into each element's local style in the SelectionGroup, or fetches them from the first.\r\n\t * If input is undefined, this will return a copied object of this element's local styles.\r\n\t * If input is an array of CSS attribute names, this will return an object of this element's corresponding local style values.\r\n\t * If input is a CSS attribute name, this will return this element's corresponding local style values.\r\n\t * If input is an object, this sets each element's local style values to the provided CSS attribute names and values.\r\n\t * @param {*} input the input value.\r\n\t */\r\n\tconst $style = function(input) {\r\n\t\tif (isUndefined(input)) {\r\n\t\t\treturn { ...this.style };\r\n\t\t}\r\n\t\telse if (isArray(input)) {\r\n\t\t\tlet out = {};\r\n\t\t\teach(input, (s) => {\r\n\t\t\t\tout[s] = this.style[s];\r\n\t\t\t});\r\n\t\t\treturn out;\r\n\t\t}\r\n\t\telse if (isObject(input)) {\r\n\t\t\teach(input, (v, k) => {\r\n\t\t\t\tthis.style[k] = v;\r\n\t\t\t});\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn this.style[input];\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Merges a set of DOM attributes into each element's attributes in the SelectionGroup, or fetches them from the first.\r\n\t * If input is undefined, this will return an object of this element's attribute values.\r\n\t * If input is an array of attribute names, this will return an object of this element's corresponding attribute values.\r\n\t * If input is an attribute name, this will return this element's corresponding attribute value.\r\n\t * If input is an object, this sets each element's attributes to the provided corresponding values.\r\n\t * @param {*} input the input value.\r\n\t */\r\n\tconst $attr = function(input) {\r\n\t\tif (isUndefined(input)) {\r\n\t\t\tlet out = {};\r\n\t\t\tconst names = this.getAttributeNames();\r\n\t\t\tfor (let i = 0; i < names.length; i++) {\r\n\t\t\t\tout[names[i]] = this.getAttribute(names[i]);\r\n\t\t\t}\r\n\t\t\treturn out;\r\n\t\t}\r\n\t\telse if (isArray(input)) {\r\n\t\t\tlet out = {};\r\n\t\t\teach(input, (a) => {\r\n\t\t\t\tout[a] = this.getAttribute(a);\r\n\t\t\t});\r\n\t\t\treturn out;\r\n\t\t}\r\n\t\telse if (isObject(input)) {\r\n\t\t\teach(input, (v, k) => {\r\n\t\t\t\tthis.setAttribute(k, v);\r\n\t\t\t});\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn this.getAttribute(input);\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Adds a set of CSS classes to each element in the SelectionGroup.\r\n\t * @param {string} classNames... the vararg list of class names to add to each element.\r\n\t */\r\n\tconst $classAdd = function(/* classNames... */) {\r\n\t\tconst classNames = arguments;\r\n\t\tconst classes = this.className.trim().length > 0 ? this.className.split(/\\s+/) : [];\r\n\t\tconst classSet = fold({}, (obj) => {\r\n\t\t\tclasses.map((c) => {obj[c] = true;});\r\n\t\t});\r\n\t\tfor (let i = 0; i < classNames.length; i++) {\r\n\t\t\tif (!classSet[classNames[i]]) {\r\n\t\t\t\tclasses.push(classNames[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.className = classes.join(\" \");\r\n\t};\r\n\r\n\t/**\r\n\t * Removes a set of CSS classes from each element in the SelectionGroup.\r\n\t * @param {string} classNames... the vararg list of class names to remove from each element.\r\n\t */\r\n\tconst $classRemove = function(/* classNames... */) {\r\n\t\tconst classNames = arguments;\r\n\t\tconst classes = this.className.trim().length > 0 ? this.className.split(/\\s+/) : [];\r\n\t\tconst remset = {};\r\n\t\tfor (let i = 0; i < classNames.length; i++) {\r\n\t\t\tremset[classNames[i]] = true;\r\n\t\t}\r\n\t\tconst out = [];\r\n\t\teach(classes, (c) => {\r\n\t\t\tif (!remset[c]) {\r\n\t\t\t\tout.push(c);\r\n\t\t\t}\r\n\t\t});\r\n\t\tif (isBlank(out))\r\n\t\t\tthis.removeAttribute('class');\r\n\t\telse\r\n\t\t\tthis.className = out.join(\" \");\r\n\t};\r\n\r\n\t/**\r\n\t * Toggles the presence of a set of CSS classes in each element in the SelectionGroup.\r\n\t * If the class exists, it is removed, and if the class does not exist, it is added.\r\n\t * @param {string} classNames... the vararg list of class names to toggle in each element.\r\n\t */\r\n\tconst $classToggle = function(/* classNames... */) {\r\n\t\tconst classNames = arguments;\r\n\t\tconst classes = this.className.trim().length > 0 ? this.className.split(/\\s+/) : [];\r\n\t\tconst classSet = fold({}, (obj) => {\r\n\t\t\tclasses.map((c) => {obj[c] = true;});\r\n\t\t});\r\n\t\tconst argSet = fold({}, (obj) => {\r\n\t\t\teach(classNames, (c) => {\r\n\t\t\t\tobj[c] = true;\r\n\t\t\t});\r\n\t\t});\r\n\t\t\r\n\t\tconst out = [];\r\n\r\n\t\tfor (let i = 0; i < classes.length; i++) {\r\n\t\t\tconst name = classes[i];\r\n\t\t\tif (!argSet[name]) {\r\n\t\t\t\tout.push(name);\r\n\t\t\t}\r\n\t\t}\r\n\t\tfor (let i = 0; i < classNames.length; i++) {\r\n\t\t\tconst name = classNames[i];\r\n\t\t\tif (!classSet[name]) {\r\n\t\t\t\tout.push(name);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (isBlank(out))\r\n\t\t\tthis.removeAttribute('class');\r\n\t\telse\r\n\t\t\tthis.className = out.join(\" \");\r\n\t};\r\n\r\n\t/********************************************************************/\r\n\r\n\t/**\r\n\t * Scrapes a form element for its values and returns an object of the name-value pairings of the form fields,\r\n\t * or an object mapping (name/id for key).\r\n\t * The 'id' attribute is used if 'name' is not provided. Unnamed, disabled, or unchecked form elements are not scraped.\r\n\t * @param {function} callback (optional) if provided, call this function with one argument: the data returned.\r\n\t * @returns an object of the name/value pairings of the form fields, or the pass-through selection group if a callback was provided.\r\n\t */\r\n\tconst $form = function(callback) {\r\n\t\t\r\n\t\tif (!isUndefined(callback) && !isFunction(callback)) {\r\n\t\t\tthrow new Error(\"Callback function for formData must be a function!\");\r\n\t\t}\r\n\t\t\r\n\t\tconst formData = {};\r\n\r\n\t\tconst GATHERFUNC = function() {\r\n\t\t\tconst memberName = this.getAttribute('name');\r\n\t\t\tif (!!memberName) {\r\n\t\t\t\tif (!this.disabled) {\r\n\t\t\t\t\tconst t = this.getAttribute('type');\r\n\t\t\t\t\tconst v = (t === 'checkbox' || t === 'radio') \r\n\t\t\t\t\t\t? this.checked && this.value\r\n\t\t\t\t\t\t: this.value;\r\n\t\t\t\t\tif (v) {\r\n\t\t\t\t\t\tif (isObject(formData[memberName])) {\r\n\t\t\t\t\t\t\tformData[memberName].push(v);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if (formData[memberName]) {\r\n\t\t\t\t\t\t\tlet arr = [formData[memberName], v];\r\n\t\t\t\t\t\t\tformData[memberName] = arr;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\tformData[memberName] = v;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t(new SelectionGroup(this)).search('input, textarea, select').each(GATHERFUNC);\r\n\r\n\t\tif (callback) {\r\n\t\t\tcallback(formData);\r\n\t\t\treturn this;\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn formData;\r\n\t\t}\r\n\t};\r\n\r\n\t/********************************************************************/\r\n\r\n\t/**\r\n\t * Attaches a function to a DOM element event handler.\r\n\t * The function should take a single parameter: the event that triggered this.\r\n\t * @param {string} eventName the event name (for example, \"mouseenter\", \"click\", etc.).\r\n\t * @param {Function} func the function to attach.\r\n\t */\r\n\tconst $attach = function(eventName, func) {\r\n\t\tthis.addEventListener(eventName, func);\r\n\t};\r\n\r\n\t/**\r\n\t * Detaches a function from a DOM element event handler (the \"on\" members).\r\n\t * @param {string} eventName the event name (for example, \"mouseenter\", \"click\", etc.).\r\n\t * @param {Function} func the function to detach.\r\n\t */\r\n\tconst $detach = function(eventName, func) {\r\n\t\tthis.removeEventListener(eventName, func);\r\n\t};\r\n\r\n\t/********************************************************************/\r\n\r\n\t/**\r\n\t * Wraps a single element in the SelectionGroup in a new SelectionGroup.\r\n\t * @param {number} index the index of the selected element.\r\n\t * @returns {SelectionGroup} the new SelectionGroup of matching elements.\r\n\t */\r\n\tconst $get = function(index) {\r\n\t\treturn new SelectionGroup(this[index]);\r\n\t};\r\n\r\n\t/**\r\n\t * Wraps the first element in the SelectionGroup in a new SelectionGroup.\r\n\t * @returns {SelectionGroup} the new SelectionGroup.\r\n\t */\r\n\tconst $first = function() {\r\n\t\treturn new SelectionGroup(this[0]);\r\n\t};\r\n\r\n\t/**\r\n\t * Wraps the last element in the SelectionGroup in a new SelectionGroup.\r\n\t * @returns {SelectionGroup} the new SelectionGroup.\r\n\t */\r\n\tconst $last = function() {\r\n\t\treturn new SelectionGroup(this[this.length - 1]);\r\n\t};\r\n\r\n\t/********************************************************************/\r\n\r\n\t/**\r\n\t * Takes a single object where the keys are selector queries to run via .search() and\r\n\t * corresponding values are functions to call on the selection results via .each().\r\n\t * @param {Object} selectorMap the mapping of selector strings to functions.\r\n\t */\r\n\tconst $apply = function(selectorMap) {\r\n\t\teach(selectorMap, (v, k) => {\r\n\t\t\tthis.search(k).each(v);\r\n\t\t});\r\n\t};\r\n\r\n\t/********************************************************************/\r\n\r\n\t/**\r\n\t * Unwraps a query, returning every element in the query as-is.\r\n\t * @returns {Array} the array of elements. \r\n\t */\r\n\tconst $elements = function() {\r\n\t\treturn [ ...this];\r\n\t};\r\n\r\n\r\n\t/********************************************************************/\r\n\t/** Exported                                                       **/\r\n\t/********************************************************************/\r\n\r\n\t/**\r\n\t * Performs a document query, returning the list of matches as a SelectionGroup.\r\n\t * If the first argument is undefined or null, an empty SelectionGroup is returned.\r\n\t * If the first argument is a SelectionGroup (created from this function), a copy of the SelectionGroup is returned.\r\n\t * If the first argument is a string: \r\n\t * \t\tif the string contains HTML, it will generate HTML elements and wrap them in a SelectionGroup.\r\n\t * \t\telse, it is treated as a CSS selector, and the elements that match are in the SelectionGroup. \r\n\t * Anything else, and the SelectionGroup contains that object, or treats it like a group if it is an array.\r\n\t * @param {*} query the CSS/document query.\r\n\t * @param {boolean} one (optional) if true, and CSS selector, return only the first match.\r\n\t * @returns {SelectionGroup} the matching elements, encapsulated.\r\n\t */\r\n\tconst DOMJunk = new function() {\r\n\t\treturn function(query, one) {\r\n\t\t\tif (isUndefined(query) || isNull(query)) {\r\n\t\t\t\treturn new SelectionGroup([]);\r\n\t\t\t}\r\n\t\t\telse if (query instanceof SelectionGroup || isArray(query)) {\r\n\t\t\t\treturn new SelectionGroup([ ...query])\r\n\t\t\t}\r\n\t\t\telse if (isString(query)) {\r\n\t\t\t\tif (isHTML(query)) {\r\n\t\t\t\t\treturn new SelectionGroup(createHTML(query));\r\n\t\t\t\t} \r\n\t\t\t\telse {\r\n\t\t\t\t\treturn !!one \r\n\t\t\t\t\t\t? new SelectionGroup(document.querySelector(query))\r\n\t\t\t\t\t\t: new SelectionGroup(document.querySelectorAll(query))\r\n\t\t\t\t\t;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\treturn new SelectionGroup(query)\r\n\t\t\t}\r\n\t\t};\r\n\t};\r\n\r\n\t/**\r\n\t * Adds a wrapped function to the SelectionGroup prototype.\r\n\t * The function's [this] keyword becomes each element.\r\n\t * When the function is called, it is called once per element, unless the function returns a value.\r\n\t * If the function returns a value (not undefined), it is returned as the result.\r\n\t * If it never returned a function, the SelectionGroup instance is returned as the result.\r\n\t * @param {string} name the name of the function to add to all query results.\r\n\t * @param {Function} func the function itself (cannot be a lambda closure).\r\n\t */\r\n\tDOMJunk.extend = function(name, func) {\r\n\t\tif (SelectionGroup.prototype[name]) {\r\n\t\t\tconsole.warn('DOMJunk: Overriding existing function: ' + name);\r\n\t\t}\r\n\t\tSelectionGroup.prototype[name] = function() {\r\n\t\t\tlet retval;\r\n\t\t\tfor (let i = 0; i < this.length && isUndefined(retval); i++) {\r\n\t\t\t\tretval = func.apply(this[i], arguments);\r\n\t\t\t}\r\n\t\t\treturn isUndefined(retval) ? this : retval;\r\n\t\t};\r\n\t};\r\n\r\n\t/**\r\n\t * Adds a wrapped function to the SelectionGroup prototype.\r\n\t * The function's [this] keyword becomes the SelectionGroup itself.\r\n\t * @param {string} name the name of the function to add.\r\n\t * @param {Function} func the function to add (cannot be a lambda closure).\r\n\t */\r\n\tDOMJunk.extendSelection = function(name, func) {\r\n\t\tif (SelectionGroup.prototype[name]) {\r\n\t\t\tconsole.warn('DOMJunk: Overriding existing function: ' + name);\r\n\t\t}\r\n\t\tSelectionGroup.prototype[name] = function() {\r\n\t\t\treturn func.apply(this, arguments);\r\n\t\t};\r\n\t};\r\n\t\r\n\t/**\r\n\t * Auto-selects a series of selection groups using an object that maps\r\n\t * member name to selector query or function that returns a SelectionGroup.\r\n\t * @param {Object} memberSet a map of member name to selector.\r\n\t * \t\tIf the selector is a string, it is used as a selector to build the group.\r\n\t * \t\tElse if it's a function, it is called to return the member's value.\r\n\t * \t\tElse, it is the member's value.\r\n\t * @returns {Object} a new object that is a mapping of name to SelectionGroup.\r\n\t */\r\n\tDOMJunk.createGroups = function(memberSet) {\r\n\t\tconst out = {};\r\n\t\teach(memberSet, (selector, memberName) => {\r\n\t\t\tlet value = null;\r\n\t\t\tif (isString(selector)) {\r\n\t\t\t\tvalue = DOMJunk(selector);\r\n\t\t\t} else if (isFunction(selector)) {\r\n\t\t\t\tvalue = selector();\r\n\t\t\t} else {\r\n\t\t\t\tvalue = selector;\r\n\t\t\t}\r\n\r\n\t\t\tout[memberName] = value;\r\n\t\t});\r\n\t\treturn out;\r\n\t};\r\n\r\n\t/**\r\n\t * Creates one or more elements from a template element, applying a model to\r\n\t * it, and returning a generated element. The template content is assumed to have\r\n\t * \"handlebar\" tokens in them (\"{{tokenName}}\") that contain the name of the member to resolve\r\n\t * in the model.\r\n\t * @param {Element} templateElement the template element or a query containing\r\n\t * \t\ta template element to use as the template.\r\n\t * @param {Object | Array} model a model to use for filling the template.\r\n\t * \t\tIf model is an Array, multiple templates are made and returned.\r\n\t * @returns {Array} an array of generated elements.\r\n\t */\r\n\tDOMJunk.createTemplateElements = function(templateElement, model) {\r\n\t\tconst templateData = document.importNode(templateElement, true);\r\n\t\tconst templateContent = templateData.innerHTML.trim();\r\n\r\n\t\tconst _GENERATEELEMENT = (modelObject) => {\r\n\t\t\tconst matches = templateContent.match(/{{.+?}}/g);\r\n\t\t\tlet lastSearchIndex = 0;\r\n\t\t\tlet outHTML = '';\r\n\t\t\tif (matches) {\r\n\t\t\t\tfor (let i = 0; i < matches.length; i++) {\r\n\t\t\t\t\tconst token = matches[i]; // has handlebars\r\n\t\t\t\t\tlet matchIndex = templateContent.indexOf(token, lastSearchIndex);\r\n\t\t\t\t\tif (matchIndex >= 0) {\r\n\t\t\t\t\t\toutHTML += templateContent.substring(lastSearchIndex, matchIndex);\r\n\t\t\t\t\t\tconst expression = token.substring(2, token.length - 2);\r\n\t\t\t\t\t\tconst expressionChain = expression.split(\".\");\r\n\t\t\t\t\t\tlet result = modelObject;\r\n\t\t\t\t\t\tfor (let j = 0; j < expressionChain.length; j++) {\r\n\t\t\t\t\t\t\tresult = result[expressionChain[j]];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (!isUndefined(result)) {\r\n\t\t\t\t\t\t\toutHTML += isNull(result) ? '' : HTML_ESCAPE(result.toString());\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tlastSearchIndex = matchIndex + token.length;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\toutHTML += templateContent.substring(lastSearchIndex);\r\n\t\t\t}\r\n\r\n\t\t\treturn createHTML(outHTML);\r\n\t\t};\r\n\r\n\t\tconst generated = [];\r\n\t\tif (isArray(model)) {\r\n\t\t\teach(model, (m) => {\r\n\t\t\t\teach (_GENERATEELEMENT(m), (e) => {\r\n\t\t\t\t\tgenerated.push(e);\r\n\t\t\t\t})\r\n\t\t\t});\r\n\t\t\treturn generated;\r\n\t\t}\r\n\t\telse {\r\n\t\t\teach (_GENERATEELEMENT(model), (e) => {\r\n\t\t\t\tgenerated.push(e);\r\n\t\t\t})\r\n\t\t\treturn generated;\r\n\t\t}\r\n\t};\r\n\r\n\t/********************************************************************/\r\n\r\n\tlet PERFCOUNTER = 0;\r\n\r\n\t/**\r\n\t * Performance-tests a function for a set of iterations.\r\n\t * @param {Number} iterations the number of iterations to call.\r\n\t * @param {Function} funcTest the function to test.\r\n\t */\r\n\tDOMJunk.perfTest = function(iterations, funcTest) {\r\n\t\tconst counter = PERFCOUNTER++;\r\n\t\tconsole.time('perfcount' + counter);\r\n\t\tfor (let i = 0; i < iterations; i++) {\r\n\t\t\tfuncTest();\r\n\t\t}\r\n\t\tconsole.timeEnd('perfcount' + counter);\r\n\t\tfuncDone();\r\n\t};\r\n\t\r\n\t/**\r\n\t * Performs an time-based iteration test for a function.\r\n\t * @param {Number} time the time to take for the test (resolution based on performance.now()).\r\n\t * @param {Function} funcCall the function to call repeatedly.\r\n\t * @returns {Number} the amount of iterations taken wwithin the desired time.\r\n\t */\r\n\tDOMJunk.iterationTest = function(time, funcCall) {\r\n\t\tlet iterations = 0;\r\n\t\tconst start = performance.now();\r\n\t\twhile(performance.now() - start < time) {\r\n\t\t\tfuncCall();\r\n\t\t\titerations++;\r\n\t\t}\r\n\t\treturn iterations;\r\n\t};\r\n\r\n\t/********************************************************************/\r\n\r\n\tDOMJunk.extend('each', $each);\r\n\tDOMJunk.extend('search', $search);\r\n\tDOMJunk.extend('child', $child);\r\n\tDOMJunk.extend('children', $children);\r\n\tDOMJunk.extend('parent', $parent);\r\n\tDOMJunk.extend('ancestors', $ancestors);\r\n\tDOMJunk.extend('descendants', $descendants);\r\n\tDOMJunk.extend('siblings', $siblings);\r\n\r\n\tDOMJunk.extend('clear', $clear);\r\n\tDOMJunk.extend('append', $append);\r\n\tDOMJunk.extend('refill', $refill);\r\n\tDOMJunk.extend('refillTemplate', $refillTemplate);\r\n\tDOMJunk.extend('refillList', $refillList);\r\n\tDOMJunk.extend('html', $html);\r\n\tDOMJunk.extend('text', $text);\r\n\r\n\tDOMJunk.extend('set', $set);\r\n\tDOMJunk.extend('merge', $merge);\r\n\r\n\tDOMJunk.extend('style', $style);\r\n\tDOMJunk.extend('attr', $attr);\r\n\tDOMJunk.extend('classAdd', $classAdd);\r\n\tDOMJunk.extend('classRemove', $classRemove);\r\n\tDOMJunk.extend('classToggle', $classToggle);\r\n\r\n\tDOMJunk.extend('attach', $attach);\r\n\tDOMJunk.extend('detach', $detach);\r\n\r\n\tDOMJunk.extendSelection('get', $get);\r\n\tDOMJunk.extendSelection('first', $first);\r\n\tDOMJunk.extendSelection('last', $last);\r\n\tDOMJunk.extendSelection('form', $form);\r\n\tDOMJunk.extendSelection('apply', $apply);\r\n\tDOMJunk.extendSelection('elements', $elements);\r\n\r\n\tconst wrapAttach = function(attachName) {\r\n\t\treturn function(func) { \r\n\t\t\tthis.attach(attachName, func); \r\n\t\t};\r\n\t}\r\n\r\n\tDOMJunk.extendSelection('load',       wrapAttach('load'));\r\n\tDOMJunk.extendSelection('unload',     wrapAttach('unload'));\r\n\tDOMJunk.extendSelection('click',      wrapAttach('click'));\r\n\tDOMJunk.extendSelection('dblclick',   wrapAttach('dblclick'));\r\n\tDOMJunk.extendSelection('mouseenter', wrapAttach('mouseenter'));\r\n\tDOMJunk.extendSelection('mouseleave', wrapAttach('mouseleave'));\r\n\tDOMJunk.extendSelection('keydown',    wrapAttach('keydown'));\r\n\tDOMJunk.extendSelection('keyup',      wrapAttach('keyup'));\r\n\tDOMJunk.extendSelection('focus',      wrapAttach('focus'));\r\n\tDOMJunk.extendSelection('blur',       wrapAttach('blur'));\r\n\tDOMJunk.extendSelection('change',     wrapAttach('change'));\r\n\r\n\tDOMJunk.id =    $getById;\r\n\tDOMJunk.class = $getByClassName;\r\n\tDOMJunk.tag =   $getByTagName;\r\n\r\n\tDOMJunk.each = each;\r\n\tDOMJunk.fold = fold;\r\n\tDOMJunk.queryString = queryString;\r\n\r\n\tDOMJunk.isType = isType;\r\n\tDOMJunk.isUndefined = isUndefined;\r\n\tDOMJunk.isNull = isNull;\r\n\tDOMJunk.isBoolean = isBoolean;\r\n\tDOMJunk.isNumber = isNumber;\r\n\tDOMJunk.isString = isString;\r\n\tDOMJunk.isArray = isArray;\r\n\tDOMJunk.isFunction = isFunction;\r\n\tDOMJunk.isObject = isObject;\r\n\tDOMJunk.isBlank = isBlank;\r\n\tDOMJunk.isHTML = isHTML;\r\n\r\n\tDOMJunk.h = createHTML;\r\n\tDOMJunk.e = createElement;\r\n\tDOMJunk.t = createText;\r\n\r\n\t/********************************************************************/\r\n\r\n\tlet old$DJAssignment     = CTX.$DJ;\r\n\tlet old$DJMainAssignment = CTX.$DJMain;\r\n\r\n\t/**\r\n\t * Restores the previous assigment of '$DJ' and '$DJMain' at load.\r\n\t */\r\n\tDOMJunk.noConflict = function() {\r\n\t\tCTX.$DJ     = old$DJAssignment;\r\n\t\tCTX.$DJMain = old$DJMainAssignment;\r\n\t};\r\n\t\r\n\tconst MAINFUNCS = [];\r\n\r\n\tCTX.DOMJunk = DOMJunk;\r\n\tCTX.$DJ     = DOMJunk;\r\n\tCTX.$DJMain = function(func) { \r\n\t\tMAINFUNCS.push(func);\r\n\t};\r\n\r\n\t/********************************************************************/\r\n\r\n\tdocument.addEventListener(\"DOMContentLoaded\", function(){\r\n\t\tfor (let i = 0; i < MAINFUNCS.length; i++)\r\n\t\t\tMAINFUNCS[i]();\r\n\t});\r\n\r\n\t/**\r\n\t TODO: Add stuff, maybe.\r\n\t\tFormValidate\r\n\t\tFormFill\r\n\t*/\r\n\r\n})(this);\r\n"],"names":["CTX","Element","console","error","document","querySelectorAll","querySelector","createElement","createTextNode","prototype","isBoolean","obj","isType","isFunction","isObject","isBlank","isUndefined","isNull","isArray","length","isNumber","isNaN","isString","trim","each","list","func","let","i","x","hasOwnProperty","fold","ENTITIES","&","<",">","\"","'","/","`","=","HTML_SPECIAL","HTML_REGEX","HTML_ESCAPE","input","replace","m","type","Object","toString","call","isHTML","test","createHTML","html","outElement","innerHTML","content","childNodes","SelectionGroup","Array","constructor","elements","forceOne","super","this","DOMJunk","query","one","extend","name","warn","retval","apply","arguments","extendSelection","createGroups","memberSet","out","selector","memberName","value","createTemplateElements","templateElement","model","templateContent","importNode","_GENERATEELEMENT","matches","match","lastSearchIndex","outHTML","token","matchIndex","indexOf","substring","expressionChain","split","result","modelObject","j","generated","push","e","PERFCOUNTER","perfTest","iterations","funcTest","counter","time","timeEnd","funcDone","iterationTest","funcCall","start","performance","now","index","children","parentElement","elem","childQueue","child","pop","firstChild","removeChild","appendChild","NodeList","Document","DocumentFragment","clear","append","template","arr","generatorFunc","v","k","gen","data","text","innerText","memberMap","style","s","names","getAttributeNames","getAttribute","a","setAttribute","classNames","classes","className","classSet","map","c","join","remset","removeAttribute","argSet","eventName","addEventListener","removeEventListener","callback","Error","formData","search","disabled","t","checked","selectorMap","wrapAttach","attachName","attach","id","getElementById","class","classname","getElementsByClassName","tag","tagname","namespace","getElementsByTagName","getElementsByTagNameNS","queryString","accum","key","encodeURIComponent","h","attribs","attrObj","createAttribute","setAttributeNode","old$DJAssignment","$DJ","old$DJMainAssignment","$DJMain","noConflict","MAINFUNCS"],"mappings":";;;;;8EAMA;CAAA,SAAUA,GAMT,GAAI,CAACA,EAAIC,QAER,OADAC,QAAQC,MAAM,iCAAiC,EAGhD,GAAI,CAACH,EAAII,SAASC,iBAEjB,OADAH,QAAQC,MAAM,uDAAuD,EAGtE,GAAI,CAACH,EAAII,SAASE,cAEjB,OADAJ,QAAQC,MAAM,oDAAoD,EAGnE,GAAI,CAACH,EAAII,SAASG,cAEjB,OADAL,QAAQC,MAAM,oDAAoD,EAGnE,GAAI,CAACH,EAAII,SAASI,eAEjB,OADAN,QAAQC,MAAM,qDAAqD,EAGpE,GAAI,CAACH,EAAIC,QAAQQ,UAAUJ,iBAE1B,OADAH,QAAQC,MAAM,sDAAsD,EAGrE,GAAI,CAACH,EAAIC,QAAQQ,UAAUH,cAE1B,OADAJ,QAAQC,MAAM,mDAAmD,EAsChD,SAAZO,EAAqBC,GAC1B,OAAOC,EAAOD,EAAK,SAAS,CAC7B,CAcmB,SAAbE,EAAsBF,GAC3B,OAAOC,EAAOD,EAAK,UAAU,CAC9B,CAEiB,SAAXG,EAAoBH,GACzB,OAAOC,EAAOD,EAAK,QAAQ,CAC5B,CAEgB,SAAVI,EAAmBJ,GACxB,OACEK,EAAYL,CAAG,GACbM,EAAON,CAAG,GACTO,EAAQP,CAAG,GAAoB,IAAfA,EAAIQ,QACpBC,EAAST,CAAG,GAAKU,MAAMV,CAAG,GAC1BW,EAASX,CAAG,GAA2B,IAAtBA,EAAIY,KAAK,EAAEJ,QACrB,IAARR,CAEL,CAEa,SAAPa,EAAgBC,EAAMC,GAC3B,GAAIV,CAAAA,EAAYS,CAAI,GAAKR,CAAAA,EAAOQ,CAAI,EAG/B,GAAIf,EAAUe,CAAI,GAAKL,EAASK,CAAI,GAAKH,EAASG,CAAI,EAC1DC,EAAKD,EAAM,KAAM,CAAC,OAEd,GAAIP,EAAQO,CAAI,EACpB,IAAKE,IAAIC,EAAI,EAAGA,EAAIH,EAAKN,QACpBO,CAAAA,EAAKD,EAAKG,GAAIA,EAAGH,EAAKN,MAAM,EADAS,CAAC,SAMlC,IAAKD,IAAIE,KAAKJ,EAAM,GAAIA,EAAKK,eAAeD,CAAC,GACxCH,EAAKD,EAAKI,GAAIA,EAAGJ,EAAKN,MAAM,EAC/B,KAGJ,CAEa,SAAPY,EAAgBpB,EAAKe,GAE1B,OADAA,EAAKf,CAAG,EACDA,CACR,CAxFA,MAAMqB,EAAW,CAChBC,IAAK,QACLC,IAAK,OACLC,IAAK,OACLC,IAAK,SACLC,IAAK,QACLC,IAAK,SACLC,IAAK,SACLC,IAAK,QACN,EAEMC,EAAe,wBAEfC,EAAa,qBAEbC,EAAc,GAAWC,EAAMC,QAAQJ,EAAc,GAAOT,EAASc,EAAE,EAEvElC,EAAS,SAASD,EAAKoC,GAC5B,OAAOC,OAAOvC,UAAUwC,SAASC,KAAKvC,CAAG,IAAM,WAAWoC,EAAK,GAChE,EAEM/B,EAAc,SAASL,GAC5B,OAAwB,KAAA,IAATA,CAChB,EAEMM,EAAS,SAASN,GACvB,OAAe,OAARA,CACR,EAMMS,EAAW,SAAST,GACzB,OAAOC,EAAOD,EAAK,QAAQ,CAC5B,EAEMW,EAAW,SAASX,GACzB,OAAOC,EAAOD,EAAK,QAAQ,CAC5B,EAEMO,EAAU,SAASP,GACxB,OAAOC,EAAOD,EAAK,OAAO,CAC3B,EAkEe,SAATwC,EAAkBxC,GACvB,OAAO+B,EAAWU,KAAKzC,CAAG,CAC3B,CAEmB,SAAb0C,EAAsBC,GAC3B,IAAMC,EAAanD,SAASG,cAAc,UAAU,EAEpD,OADAgD,EAAWC,UAAYF,EAChBC,EAAWE,QAAQC,UAC3B,OAsEMC,UAAuBC,MAC5BC,YAAYC,EAAUC,GAGrB,GAFAC,MAAM,EAEFhD,EAAY8C,CAAQ,GAAK7C,EAAO6C,CAAQ,EAC3CG,KAAK9C,OAAS,OAGV,GAAM4C,GAAY/C,EAAY8C,EAAS3C,MAAM,EACjD8C,KAAK,GAAKH,EACVG,KAAK9C,OAAS,MAGV,CACJ,IAAKQ,IAAIC,EAAI,EAAGA,EAAIkC,EAAS3C,OAAQS,CAAC,GACrCqC,KAAKrC,GAAKkC,EAASlC,GAEpBqC,KAAK9C,OAAS2C,EAAS3C,MACxB,CACD,CACD,CA0gBA,MAAM+C,EAAU,IAAI,WACnB,OAAO,SAASC,EAAOC,GACtB,OAAIpD,EAAYmD,CAAK,GAAKlD,EAAOkD,CAAK,EAC9B,IAAIR,EAAe,EAAE,EAEpBQ,aAAiBR,GAAkBzC,EAAQiD,CAAK,EACjD,IAAIR,EAAe,CAAE,GAAGQ,EAAM,EAE7B7C,EAAS6C,CAAK,EAClBhB,EAAOgB,CAAK,EACR,IAAIR,EAAeN,EAAWc,CAAK,CAAC,EAGlCC,EACN,IAAIT,EAAevD,SAASE,cAAc6D,CAAK,CAAC,EAChD,IAAIR,EAAevD,SAASC,iBAAiB8D,CAAK,CAAC,EAKhD,IAAIR,EAAeQ,CAAK,CAEjC,CACD,EAWAD,EAAQG,OAAS,SAASC,EAAM5C,GAC3BiC,EAAelD,UAAU6D,IAC5BpE,QAAQqE,KAAK,0CAA4CD,CAAI,EAE9DX,EAAelD,UAAU6D,GAAQ,WAChC3C,IAAI6C,EACJ,IAAK7C,IAAIC,EAAI,EAAGA,EAAIqC,KAAK9C,QAAUH,EAAYwD,CAAM,EAAG5C,CAAC,GACxD4C,EAAS9C,EAAK+C,MAAMR,KAAKrC,GAAI8C,SAAS,EAEvC,OAAO1D,EAAYwD,CAAM,EAAIP,KAAOO,CACrC,CACD,EAQAN,EAAQS,gBAAkB,SAASL,EAAM5C,GACpCiC,EAAelD,UAAU6D,IAC5BpE,QAAQqE,KAAK,0CAA4CD,CAAI,EAE9DX,EAAelD,UAAU6D,GAAQ,WAChC,OAAO5C,EAAK+C,MAAMR,KAAMS,SAAS,CAClC,CACD,EAWAR,EAAQU,aAAe,SAASC,GAC/B,MAAMC,EAAM,GAaZ,OAZAtD,EAAKqD,EAAW,CAACE,EAAUC,KAC1BrD,IAAIsD,EAAQ,KAEXA,EADG3D,EAASyD,CAAQ,EACZb,EAAQa,CAAQ,EACdlE,EAAWkE,CAAQ,EACrBA,EAAS,EAETA,EAGTD,EAAIE,GAAcC,CACnB,CAAC,EACMH,CACR,EAaAZ,EAAQgB,uBAAyB,SAASC,EAAiBC,GAE1D,MAAMC,EADejF,SAASkF,WAAWH,EAAiB,CAAA,CAAI,EACzB3B,UAAUjC,KAAK,EAE9CgE,EAAmB,IACxB,IAAMC,EAAUH,EAAgBI,MAAM,UAAU,EAChD9D,IAAI+D,EAAkB,EAClBC,EAAU,GACd,GAAIH,EAAS,CACZ,IAAK7D,IAAIC,EAAI,EAAGA,EAAI4D,EAAQrE,OAAQS,CAAC,GAAI,CACxC,IAAMgE,EAAQJ,EAAQ5D,GAClBiE,EAAaR,EAAgBS,QAAQF,EAAOF,CAAe,EAC/D,GAAkB,GAAdG,EAAiB,CACpBF,GAAWN,EAAgBU,UAAUL,EAAiBG,CAAU,EAChE,IACMG,EADaJ,EAAMG,UAAU,EAAGH,EAAMzE,OAAS,CAAC,EACnB8E,MAAM,GAAG,EAC5CtE,IAAIuE,EAASC,EACb,IAAKxE,IAAIyE,EAAI,EAAGA,EAAIJ,EAAgB7E,OAAQiF,CAAC,GAC5CF,EAASA,EAAOF,EAAgBI,IAE5BpF,EAAYkF,CAAM,IACtBP,GAAW1E,EAAOiF,CAAM,EAAI,GAAKvD,EAAYuD,EAAOjD,SAAS,CAAC,GAE/DyC,EAAkBG,EAAaD,EAAMzE,MACtC,CACD,CACAwE,GAAWN,EAAgBU,UAAUL,CAAe,CACrD,CAEA,OAAOrC,EAAWsC,CAAO,CAC1B,EAEMU,EAAY,GAClB,OAAInF,EAAQkE,CAAK,EAChB5D,EAAK4D,EAAO,IACX5D,EAAM+D,EAAiBzC,CAAC,EAAG,IAC1BuD,EAAUC,KAAKC,CAAC,CACjB,CAAC,CACF,CAAC,EAID/E,EAAM+D,EAAiBH,CAAK,EAAG,IAC9BiB,EAAUC,KAAKC,CAAC,CACjB,CAAC,EACMF,CAET,EAIA1E,IAAI6E,EAAc,EAOlBtC,EAAQuC,SAAW,SAASC,EAAYC,GACvC,IAAMC,EAAUJ,CAAW,GAC3BtG,QAAQ2G,KAAK,YAAcD,CAAO,EAClC,IAAKjF,IAAIC,EAAI,EAAGA,EAAI8E,EAAY9E,CAAC,GAChC+E,EAAS,EAEVzG,QAAQ4G,QAAQ,YAAcF,CAAO,EACrCG,SAAS,CACV,EAQA7C,EAAQ8C,cAAgB,SAASH,EAAMI,GACtCtF,IAAI+E,EAAa,EAEjB,IADA,IAAMQ,EAAQC,YAAYC,IAAI,EACxBD,YAAYC,IAAI,EAAIF,EAAQL,GACjCI,EAAS,EACTP,CAAU,GAEX,OAAOA,CACR,EAIAxC,EAAQG,OAAO,OAtrBD,SAAS3C,GACtBA,EAAK+C,MAAMR,KAAM,CAACA,KAAK,CACxB,CAorB4B,EAC5BC,EAAQG,OAAO,SA5qBC,SAASF,EAAOC,GAC/B,OAASA,EACN,IAAIT,EAAeM,KAAK3D,cAAc6D,CAAK,CAAC,EAC5C,IAAIR,EAAeM,KAAK5D,iBAAiB8D,CAAK,CAAC,CAEnD,CAuqBgC,EAChCD,EAAQG,OAAO,QAjqBA,SAASgD,GACvB,OAAO,IAAI1D,EAAeM,KAAKqD,SAASD,EAAM,CAC/C,CA+pB8B,EAC9BnD,EAAQG,OAAO,WA1pBG,WACjB,OAAO,IAAIV,EAAeM,KAAKqD,QAAQ,CACxC,CAwpBoC,EACpCpD,EAAQG,OAAO,SAnpBC,WACf,OAAO,IAAIV,EAAeM,KAAKsD,aAAa,CAC7C,CAipBgC,EAChCrD,EAAQG,OAAO,YA5oBI,WAClB1C,IAAI6F,EAAOvD,KAEX,IADA,IAAMa,EAAM,GACkB,OAAvB0C,EAAKD,eACXzC,EAAIwB,KAAKkB,EAAKD,aAAa,EAC3BC,EAAOA,EAAKD,cAEb,OAAO,IAAI5D,EAAemB,CAAG,CAC9B,CAooBsC,EACtCZ,EAAQG,OAAO,cA/nBM,WAGpB,IAFA,IAAMS,EAAM,GACN2C,EAAa,CAAE,GAAGxD,KAAKqD,UACF,EAApBG,EAAWtG,QAAY,CAC7B,IAAMuG,EAAQD,EAAWE,IAAI,EAC7B7C,EAAIwB,KAAKoB,CAAK,EACd,IAAK/F,IAAIC,EAAI,EAAGA,EAAI8F,EAAMJ,SAASnG,OAAQS,CAAC,GAC3C6F,EAAWnB,KAAKoB,EAAMJ,SAAS1F,EAAE,CAEnC,CACA,OAAO,IAAI+B,EAAemB,CAAG,CAC9B,CAonB0C,EAC1CZ,EAAQG,OAAO,WA/mBG,WACjB,IAAMS,EAAM,GACNwC,EAAW,CAAE,GAAGrD,KAAKsD,cAAcD,UACzC,IAAK3F,IAAIC,EAAI,EAAGA,EAAI0F,EAASnG,OAAQS,CAAC,GAAI,CACzC,IAAM8F,EAAQJ,EAAS1F,GACnB8F,IAAUzD,MACba,EAAIwB,KAAKoB,CAAK,CAChB,CACA,OAAO,IAAI/D,EAAemB,CAAG,CAC9B,CAsmBoC,EAEpCZ,EAAQG,OAAO,QAhmBA,WACd,KAAOJ,KAAK2D,YACX3D,KAAK4D,YAAY5D,KAAK2D,UAAU,CAElC,CA4lB8B,EAC9B1D,EAAQG,OAAO,SAplBC,SAASP,GACxB,GAAIA,aAAoBH,GAAkBzC,EAAQ4C,CAAQ,EACzD,IAAKnC,IAAIC,EAAI,EAAGA,EAAIkC,EAAS3C,OAAQS,CAAC,GACrCqC,KAAK6D,YAAYhE,EAASlC,EAAE,OAGzB,GAAIkC,aAAoBiE,SAC5B,IAAKpG,IAAIC,EAAI,EAAGA,EAAIkC,EAAS3C,OAAQS,CAAC,GACrCqC,KAAK6D,YAAYhE,EAASlC,EAAE,OAGzB,GAAIkC,aAAoBkE,UAAYlE,aAAoBmE,iBAC5D,IAAKtG,IAAIC,EAAI,EAAGA,EAAIkC,EAASwD,SAASnG,OAAQS,CAAC,GAC9CqC,KAAK6D,YAAYhE,EAASwD,SAAS1F,EAAE,OAItCqC,KAAK6D,YAAYhE,CAAQ,CAE3B,CAikBgC,EAChCI,EAAQG,OAAO,SA1jBC,SAASP,GACxB,IAAKH,EAAeM,IAAK,EAAEiE,MAAM,EAAEC,OAAOrE,CAAQ,CACnD,CAwjBgC,EAChCI,EAAQG,OAAO,iBAhjBS,SAAS+D,EAAUhD,GACtCgD,aAAoBzE,IACvByE,EAAWA,EAAS,IACrB,IAAKzE,EAAeM,IAAK,EAAEiE,MAAM,EAAEC,OAAOjE,EAAQgB,uBACjDkD,EAAUhD,CACX,CAAC,CACF,CA0iBgD,EAChDlB,EAAQG,OAAO,aAhiBK,SAASgE,EAAKC,GACjC,MAAMxE,EAAW,GACjBtC,EAAK6G,EAAK,CAACE,EAAGC,KACPC,EAAMH,EAAcC,EAAGC,CAAC,EAC1BC,GACH3E,EAASwC,KAAKmC,CAAG,CAEnB,CAAC,EACD,IAAK9E,EAAeM,IAAK,EAAEiE,MAAM,EAAEC,OAAOrE,CAAQ,CACnD,CAuhBwC,EACxCI,EAAQG,OAAO,OAhhBD,SAASqE,GACtB,GAAI1H,EAAY0H,CAAI,EACnB,OAAOzE,KAAKT,UAGZS,KAAKT,UAAYkF,CAEnB,CAygB4B,EAC5BxE,EAAQG,OAAO,OAlgBD,SAASsE,GACtB,GAAI3H,EAAY2H,CAAI,EACnB,OAAO1E,KAAK2E,UAGZ3E,KAAKT,UAAYb,EAAYgG,CAAI,CAEnC,CA2f4B,EAE5BzE,EAAQG,OAAO,MApfF,SAASW,EAAYC,GACjChB,KAAKe,GAAcC,CACpB,CAkf0B,EAC1Bf,EAAQG,OAAO,QA7eA,SAASwE,GACvBrH,EAAKqH,EAAW,CAACN,EAAGC,KACnBvE,KAAKuE,GAAKD,CACX,CAAC,CACF,CAye8B,EAE9BrE,EAAQG,OAAO,QA/dA,SAASzB,GACvB,GAAI5B,EAAY4B,CAAK,EACpB,MAAO,CAAE,GAAGqB,KAAK6E,KAAM,EAEnB,GAAI5H,EAAQ0B,CAAK,EAAG,CACxBjB,IAAImD,EAAM,GAIV,OAHAtD,EAAKoB,EAAO,IACXkC,EAAIiE,GAAK9E,KAAK6E,MAAMC,EACrB,CAAC,EACMjE,CACR,CACK,GAAIhE,CAAAA,EAAS8B,CAAK,EAMtB,OAAOqB,KAAK6E,MAAMlG,GALlBpB,EAAKoB,EAAO,CAAC2F,EAAGC,KACfvE,KAAK6E,MAAMN,GAAKD,CACjB,CAAC,CAKH,CA4c8B,EAC9BrE,EAAQG,OAAO,OAncD,SAASzB,GACtB,GAAI5B,EAAY4B,CAAK,EAAG,CACvBjB,IAAImD,EAAM,GACJkE,EAAQ/E,KAAKgF,kBAAkB,EACrC,IAAKtH,IAAIC,EAAI,EAAGA,EAAIoH,EAAM7H,OAAQS,CAAC,GAClCkD,EAAIkE,EAAMpH,IAAMqC,KAAKiF,aAAaF,EAAMpH,EAAE,EAE3C,OAAOkD,CACR,CACK,GAAI5D,EAAQ0B,CAAK,EAAG,CACxBjB,IAAImD,EAAM,GAIV,OAHAtD,EAAKoB,EAAO,IACXkC,EAAIqE,GAAKlF,KAAKiF,aAAaC,CAAC,CAC7B,CAAC,EACMrE,CACR,CACK,GAAIhE,CAAAA,EAAS8B,CAAK,EAMtB,OAAOqB,KAAKiF,aAAatG,CAAK,EAL9BpB,EAAKoB,EAAO,CAAC2F,EAAGC,KACfvE,KAAKmF,aAAaZ,EAAGD,CAAC,CACvB,CAAC,CAKH,CA2a4B,EAC5BrE,EAAQG,OAAO,WAtaG,WACjB,IAAMgF,EAAa3E,UACnB,MAAM4E,EAAyC,EAA/BrF,KAAKsF,UAAUhI,KAAK,EAAEJ,OAAa8C,KAAKsF,UAAUtD,MAAM,KAAK,EAAI,GACjF,IAAMuD,EAAWzH,EAAK,GAAI,IACzBuH,EAAQG,IAAI,IAAQ9I,EAAI+I,GAAK,CAAA,CAAK,CAAC,CACpC,CAAC,EACD,IAAK/H,IAAIC,EAAI,EAAGA,EAAIyH,EAAWlI,OAAQS,CAAC,GAClC4H,EAASH,EAAWzH,KACxB0H,EAAQhD,KAAK+C,EAAWzH,EAAE,EAG5BqC,KAAKsF,UAAYD,EAAQK,KAAK,GAAG,CAClC,CA0ZoC,EACpCzF,EAAQG,OAAO,cArZM,WACpB,IAAMgF,EAAa3E,UACb4E,EAAyC,EAA/BrF,KAAKsF,UAAUhI,KAAK,EAAEJ,OAAa8C,KAAKsF,UAAUtD,MAAM,KAAK,EAAI,GACjF,MAAM2D,EAAS,GACf,IAAKjI,IAAIC,EAAI,EAAGA,EAAIyH,EAAWlI,OAAQS,CAAC,GACvCgI,EAAOP,EAAWzH,IAAM,CAAA,EAEzB,MAAMkD,EAAM,GACZtD,EAAK8H,EAAS,IACRM,EAAOF,IACX5E,EAAIwB,KAAKoD,CAAC,CAEZ,CAAC,EACG3I,EAAQ+D,CAAG,EACdb,KAAK4F,gBAAgB,OAAO,EAE5B5F,KAAKsF,UAAYzE,EAAI6E,KAAK,GAAG,CAC/B,CAoY0C,EAC1CzF,EAAQG,OAAO,cA9XM,WACpB,MAAMgF,EAAa3E,UACb4E,EAAyC,EAA/BrF,KAAKsF,UAAUhI,KAAK,EAAEJ,OAAa8C,KAAKsF,UAAUtD,MAAM,KAAK,EAAI,GACjF,IAAMuD,EAAWzH,EAAK,GAAI,IACzBuH,EAAQG,IAAI,IAAQ9I,EAAI+I,GAAK,CAAA,CAAK,CAAC,CACpC,CAAC,EACKI,EAAS/H,EAAK,GAAI,IACvBP,EAAK6H,EAAY,IAChB1I,EAAI+I,GAAK,CAAA,CACV,CAAC,CACF,CAAC,EAEK5E,EAAM,GAEZ,IAAKnD,IAAIC,EAAI,EAAGA,EAAI0H,EAAQnI,OAAQS,CAAC,GAAI,CACxC,IAAM0C,EAAOgF,EAAQ1H,GAChBkI,EAAOxF,IACXQ,EAAIwB,KAAKhC,CAAI,CAEf,CACA,IAAK3C,IAAIC,EAAI,EAAGA,EAAIyH,EAAWlI,OAAQS,CAAC,GAAI,CAC3C,IAAM0C,EAAO+E,EAAWzH,GACnB4H,EAASlF,IACbQ,EAAIwB,KAAKhC,CAAI,CAEf,CAEIvD,EAAQ+D,CAAG,EACdb,KAAK4F,gBAAgB,OAAO,EAE5B5F,KAAKsF,UAAYzE,EAAI6E,KAAK,GAAG,CAC/B,CA+V0C,EAE1CzF,EAAQG,OAAO,SAnSC,SAAS0F,EAAWrI,GACnCuC,KAAK+F,iBAAiBD,EAAWrI,CAAI,CACtC,CAiSgC,EAChCwC,EAAQG,OAAO,SA3RC,SAAS0F,EAAWrI,GACnCuC,KAAKgG,oBAAoBF,EAAWrI,CAAI,CACzC,CAyRgC,EAEhCwC,EAAQS,gBAAgB,MAlRX,SAAS0C,GACrB,OAAO,IAAI1D,EAAeM,KAAKoD,EAAM,CACtC,CAgRmC,EACnCnD,EAAQS,gBAAgB,QA3QT,WACd,OAAO,IAAIhB,EAAeM,KAAK,EAAE,CAClC,CAyQuC,EACvCC,EAAQS,gBAAgB,OApQV,WACb,OAAO,IAAIhB,EAAeM,KAAKA,KAAK9C,OAAS,EAAE,CAChD,CAkQqC,EACrC+C,EAAQS,gBAAgB,OA5VV,SAASuF,GAEtB,GAAI,CAAClJ,EAAYkJ,CAAQ,GAAK,CAACrJ,EAAWqJ,CAAQ,EACjD,MAAM,IAAIC,MAAM,oDAAoD,EAGrE,MAAMC,EAAW,GA4BjB,OAFA,IAAKzG,EAAeM,IAAK,EAAEoG,OAAO,yBAAyB,EAAE7I,KAxB1C,WAClB,IAIQ+G,EAQAF,EAZFrD,EAAaf,KAAKiF,aAAa,MAAM,EACrClE,GACAf,CAAAA,KAAKqG,WAEH/B,GAAW,cADXgC,EAAItG,KAAKiF,aAAa,MAAM,IACG,UAANqB,GAC5BtG,KAAKuG,UACLvG,KAAKgB,SAEHnE,EAASsJ,EAASpF,EAAW,EAChCoF,EAASpF,GAAYsB,KAAKiC,CAAC,EAEnB6B,EAASpF,IACbqD,EAAM,CAAC+B,EAASpF,GAAauD,GACjC6B,EAASpF,GAAcqD,GAGvB+B,EAASpF,GAAcuD,EAK5B,CAE4E,EAExE2B,GACHA,EAASE,CAAQ,EACVnG,MAGAmG,CAET,CAmTqC,EACrClG,EAAQS,gBAAgB,QA3PT,SAAS8F,GACvBjJ,EAAKiJ,EAAa,CAAClC,EAAGC,KACrBvE,KAAKoG,OAAO7B,CAAC,EAAEhH,KAAK+G,CAAC,CACtB,CAAC,CACF,CAuPuC,EACvCrE,EAAQS,gBAAgB,WAhPN,WACjB,MAAO,CAAE,GAAGV,KACb,CA8O6C,EAE1B,SAAbyG,EAAsBC,GAC3B,OAAO,SAASjJ,GACfuC,KAAK2G,OAAOD,EAAYjJ,CAAI,CAC7B,CACD,CAEAwC,EAAQS,gBAAgB,OAAc+F,EAAW,MAAM,CAAC,EACxDxG,EAAQS,gBAAgB,SAAc+F,EAAW,QAAQ,CAAC,EAC1DxG,EAAQS,gBAAgB,QAAc+F,EAAW,OAAO,CAAC,EACzDxG,EAAQS,gBAAgB,WAAc+F,EAAW,UAAU,CAAC,EAC5DxG,EAAQS,gBAAgB,aAAc+F,EAAW,YAAY,CAAC,EAC9DxG,EAAQS,gBAAgB,aAAc+F,EAAW,YAAY,CAAC,EAC9DxG,EAAQS,gBAAgB,UAAc+F,EAAW,SAAS,CAAC,EAC3DxG,EAAQS,gBAAgB,QAAc+F,EAAW,OAAO,CAAC,EACzDxG,EAAQS,gBAAgB,QAAc+F,EAAW,OAAO,CAAC,EACzDxG,EAAQS,gBAAgB,OAAc+F,EAAW,MAAM,CAAC,EACxDxG,EAAQS,gBAAgB,SAAc+F,EAAW,QAAQ,CAAC,EAE1DxG,EAAQ2G,GA9yBS,SAASA,GACzB,OAAO,IAAIlH,EAAevD,SAAS0K,eAAeD,CAAE,CAAC,CACtD,EA6yBA3G,EAAQ6G,MAryBgB,SAASC,GAChC,OAAO,IAAIrH,EAAevD,SAAS6K,uBAAuBD,CAAS,CAAC,CACrE,EAoyBA9G,EAAQgH,IA3xBc,SAASC,EAASC,GACvC,OAAOpK,EAAYoK,CAAS,EACzB,IAAIzH,EAAevD,SAASiL,qBAAqBF,CAAO,CAAC,EACzD,IAAIxH,EAAevD,SAASkL,uBAAuBF,EAAWD,CAAO,CAAC,CAE1E,EAwxBAjH,EAAQ1C,KAAOA,EACf0C,EAAQnC,KAAOA,EACfmC,EAAQqH,YAp3BY,SAAS9B,GAC5B9H,IAAI6J,EAAQ,GAeZ,OAdAhK,EAAKiI,EAAK,CAACxE,EAAOwG,KACjB,GAAIvK,EAAQ+D,CAAK,EAChB,IAAKtD,IAAIC,EAAI,EAAGA,EAAIqD,EAAM9D,OAAQS,CAAC,GAClC4J,EAAMlF,KACLoF,mBAAmBD,CAAG,EAAI,IAAMC,mBAAmBzG,EAAMrD,EAAE,CAC5D,OAGQZ,EAAYiE,CAAK,GAAMhE,EAAOgE,CAAK,GAC5CuG,EAAMlF,KACLoF,mBAAmBD,CAAG,EAAI,IAAMC,mBAAmBzG,CAAK,CACzD,CAEF,CAAC,EACMuG,EAAM7B,KAAK,GAAG,CACtB,EAq2BAzF,EAAQtD,OAASA,EACjBsD,EAAQlD,YAAcA,EACtBkD,EAAQjD,OAASA,EACjBiD,EAAQxD,UAAYA,EACpBwD,EAAQ9C,SAAWA,EACnB8C,EAAQ5C,SAAWA,EACnB4C,EAAQhD,QAAUA,EAClBgD,EAAQrD,WAAaA,EACrBqD,EAAQpD,SAAWA,EACnBoD,EAAQnD,QAAUA,EAClBmD,EAAQf,OAASA,EAEjBe,EAAQyH,EAAItI,EACZa,EAAQqC,EAt2Bc,SAASjC,EAAMsH,EAAStE,GAC7C,MAAMxC,EAAM1E,SAASG,cAAc+D,CAAI,EAOvC,GANIsH,GAASpK,EAAKoK,EAAS,CAACrD,EAAGC,KACxBqD,EAAUzL,SAAS0L,gBAAgBtD,CAAC,EAC1CqD,EAAQ5G,MAAQsD,EAChBzD,EAAIiH,iBAAiBF,CAAO,CAC7B,CAAC,EAEGvE,EACH,GAAIpG,EAAQoG,CAAQ,EACnB,IAAK3F,IAAIC,EAAI,EAAGA,EAAI0F,EAASnG,OAAQS,CAAC,GACrCkD,EAAIgD,YAAYR,EAAS1F,EAAE,OAI5BkD,EAAIgD,YAAYR,CAAQ,EAG1B,OAAOxC,CACR,EAo1BAZ,EAAQqG,EAl1BW,SAAS7B,GAC3B,OAAOtI,SAASI,eAAekI,CAAI,CACpC,EAo1BA/G,IAAIqK,EAAuBhM,EAAIiM,IAC3BC,EAAuBlM,EAAImM,QAK/BjI,EAAQkI,WAAa,WACpBpM,EAAIiM,IAAUD,EACdhM,EAAImM,QAAUD,CACf,EAEA,MAAMG,EAAY,GAElBrM,EAAIkE,QAAUA,EACdlE,EAAIiM,IAAU/H,EACdlE,EAAImM,QAAU,SAASzK,GACtB2K,EAAU/F,KAAK5E,CAAI,CACpB,EAIAtB,SAAS4J,iBAAiB,mBAAoB,WAC7C,IAAKrI,IAAIC,EAAI,EAAGA,EAAIyK,EAAUlL,OAAQS,CAAC,GACtCyK,EAAUzK,GAAG,CACf,CAAC,CAQD,EAAEqC,IAAI"}